<!doctype html>
<html lang="en">
  <head>
    <include src="metatags.html"></include>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=Montagu+Slab:opsz,wght@16..144,600&family=Poppins:wght@900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.scss" />
    <script type="text/javascript">
      var _paq = (window._paq = window._paq || []);
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function () {
        var u = '//vvv.northbk.org/';
        _paq.push(['setTrackerUrl', u + 'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d = document,
          g = d.createElement('script'),
          s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.async = true;
        g.src = u + 'matomo.js';
        s.parentNode.insertBefore(g, s);
      })();
    </script>
  </head>
  <body class="share-page">
    <main>
      <a href="/">
        <img height="200" width="200" src="./images/roulette-logo.png" alt="" />
      </a>
      <h1>Your valentine is on its way</h1>
      <p>
        Your anonymous voice note will be delivered to a random participant on
        Valentine's Day. Invite a friend to join the exchange.
      </p>
      <button class="fun shake share-button button">Invite a friend</button>
      <a class="send-another" href="/send.html">Send another âž”</a>
    </main>

    <script type="module">
      import * as Sentry from '@sentry/browser';

      Sentry.init({
        dsn: 'https://767e19a15cad4d6aabad365c250883a0@o4504666334298112.ingest.sentry.io/4504666336002048',
        integrations: [new Sentry.BrowserTracing()],

        // Set tracesSampleRate to 1.0 to capture 100%
        // of transactions for performance monitoring.
        // We recommend adjusting this value in production
        tracesSampleRate: 1.0,
      });

      import { createHearts } from './hearts';

      for (const $fun of document.querySelectorAll('.fun')) {
        $fun.addEventListener('click', (e) => {
          createHearts(e.target);
        });
      }

      document.querySelector('.share-button').addEventListener('click', (e) => {
        if (!navigator.share) {
          window.location.href =
            'https://twitter.com/intent/tweet?url=https%3A%2F%2Fvoice-note-valentine.com';
          return;
        }

        navigator
          .share({
            title: 'Send & receive love',
            url: 'https://voice-note-valentine.com',
          })
          .then(() => {})
          .catch((_err) => {});
      });
    </script>
  </body>
</html>
